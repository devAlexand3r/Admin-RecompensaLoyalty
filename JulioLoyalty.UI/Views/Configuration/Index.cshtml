
@{
    ViewBag.Title = "Usuarios";
}

@Styles.Render("~/Content/bootstrapSelect/bootstrap-select.min.css")

<div class="table-responsive">
    <button style="position:absolute;z-index:10" class="btn btn-primary btn-sm" title="Agregar usuario" data-toggle="modal" data-target="#add" data-backdrop="static" data-keyboard="false"><i class="fas fa-plus"></i> Nuevo usuario</button>
    <table id="tableUsers" class="table table-bordered table-sm table-hover w-100">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Apellido paterno</th>
                <th>Apellido materno</th>
                <th>Correo electrónico</th>
                <th>Rol</th>
                <th>Usuario</th>
                <th></th>
            </tr>
        </thead>
    </table>
</div>

@* Modal, Registro de usuario *@
<div class="modal fade" tabindex="-1" role="dialog" id="add">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <form id="formRegistro">
                <div class="modal-header">
                    <h5 class="modal-title">Registro de usuario</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-4 required">
                            <label class="control-label">Nombre</label>
                            <div class="dataFieldError hidden" data-valmsg-for="nombre"></div>
                            <input type="text" id="nombre" name="nombre" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4">
                            <label class="control-label">Apellido paterno</label>
                            <div class="dataFieldError hidden" data-valmsg-for="ape_paterno"></div>
                            <input type="text" id="ape_paterno" name="ape_paterno" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4">
                            <label class="control-label">Apellido materno</label>
                            <div class="dataFieldError hidden" data-valmsg-for="ape_materno"></div>
                            <input type="text" id="ape_materno" name="ape_materno" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-12" style="padding-top:1em">
                            <h4 class="text-center">DATOS DE SESIÓN</h4>
                            <hr />
                        </div>

                        <div class="col-lg-4 required">
                            <label class="control-label">Usuario</label>
                            <div class="dataFieldError hidden" data-valmsg-for="username"></div>
                            <input type="text" id="username" name="username" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4 required">
                            <label class="control-label">Contraseña</label>
                            <div class="dataFieldError hidden" data-valmsg-for="password"></div>
                            <input type="password" id="password" name="password" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4 required">
                            <label class="control-label">Confirmar contraseña</label>
                            <div class="dataFieldError hidden" data-valmsg-for="Conf_password"></div>
                            <input type="password" id="Conf_password" name="Conf_password" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4 required">
                            <label class="control-label">Correo electrónico</label>
                            <div class="dataFieldError hidden" data-valmsg-for="email"></div>
                            <input type="email" id="email" name="email" class="form-control" placeholder="" />
                        </div>
                        <div class="col-lg-4 required">
                            <label class="control-label">Roles</label>
                            <div class="dataFieldError hidden" data-valmsg-for="roles"></div>
                            <select class="form-control" id="roles" name="roles"></select>
                        </div>
                        <div class="col-lg-4" id="divdistribuidor">
                            <label class="control-label">Distribuidor</label>
                            <div class="dataFieldError hidden" data-valmsg-for="distribuidor"></div>
                            <select class="form-control" id="distribuidor" name="distribuidor" data-live-search="true" data-size="7" data-actions-box="true" multiple></select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer text-right">
                    <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close"><i class="fas fa-times"></i> Cancelar</button>
                    <button type="reset" class="btn btn-default" id="btnreset"><i class="fas fa-redo"></i> Nuevo registro</button>
                    <button id="btnAddUser" type="button" class="btn btn-primary"><i class="fas fa-check-square"></i> Guardar registro</button>
                </div>
            </form>
        </div>
    </div>
</div>

@* Modal, Editar usuario *@
<div class="modal fade" tabindex="-1" role="dialog" id="edit">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Editar usuario</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label>Nombre</label>
                            <input id="FirstName" name="FirstName" class="form-control" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Apellido paterno</label>
                            <input id="MiddleName" name="MiddleName" class="form-control" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Apellido materno</label>
                            <input id="LastName" name="LastName" class="form-control" type="text" placeholder="">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Correo electrónico</label>
                            <input id="Email" name="Email" class="form-control" type="email" placeholder="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer text-right">
                <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close"><i class="fas fa-times"></i> Cancelar</button>
                <button id="btnUpdateUser" type="button" class="btn btn-primary"><i class="fas fa-check-square"></i> Actualizar</button>
            </div>
        </div>
    </div>
</div>

@* Modal Edit, Permisos *@
<div class="modal fade" tabindex="-1" role="dialog" id="config">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Configuración de permisos</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <label>Listado de permisos</label>
                        <select class="selectpicker myselect" multiple id="selectAccess" data-live-search="true" data-size="8" data-actions-box="true" data-width="100%"></select>
                    </div>
                    <div class="col-lg-12 text-right">
                        <button type="button" id="btnUpdateAllow" class="btn btn-primary"><i class="fas fa-check-square"></i> Acualizar (permisos)</button>
                    </div>
                    <div class="col-lg-12">
                        <label>Listado de distribuidores</label>
                        <select class="selectpicker distri" multiple id="listadistribuidor" data-live-search="true" data-size="8" data-actions-box="true" data-width="100%" data-title="Listado de distribuidor"></select>
                    </div>
                    <div class="col-lg-12 text-right">
                        <button type="button" id="btnUpdatedistribuidores" class="btn btn-primary"><i class="fas fa-check-square"></i> Acualizar (Acceso a distribuidor)</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer text-right">
                <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close"><i class="fas fa-times"></i> Cancelar</button>
            </div>
        </div>
    </div>
</div>

@section scripts{
    @Scripts.Render("~/bundles/dataTables")
    @Scripts.Render("~/bundles/bootstrapSelect")
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    @Scripts.Render("~/Scripts/Services/UsersToList.js")
}